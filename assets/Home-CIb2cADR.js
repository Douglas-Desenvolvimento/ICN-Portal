import{r as p,_ as C,o as f,p as b,q as y,P as c,s as w,u as Ce,j as a,e as T,b as O,d as j,C as F,t as Te,l as we}from"./useAuthentication-BroPM0oF.js";import{_ as Re,f as ke,d as Ae,T as ye,u as Ne,e as Se,g as Pe,h as B,i as De,I as Ie,N as Oe,j as Be,k as He,C as $e,l as Ke,m as L,n as M,P as Ve}from"./Prove-C3KCq-oY.js";var je=p.createContext({}),U=p.forwardRef(function(e,s){var t=e.children,r=e.activeItemKey,i=e.alwaysOpen,d=i===void 0?!1:i,u=e.className,n=e.flush,o=C(e,["children","activeItemKey","alwaysOpen","className","flush"]),l=p.useState(r),h=l[0],m=l[1];return f.createElement("div",b({className:y("accordion",{"accordion-flush":n},u)},o,{ref:s}),f.createElement(je.Provider,{value:{_activeItemKey:h,alwaysOpen:d,setActiveKey:m}},t))});U.propTypes={alwaysOpen:c.bool,activeItemKey:c.oneOfType([c.number,c.string]),children:c.node,className:c.string,flush:c.bool};U.displayName="CAccordion";var le=p.createContext({}),q=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=e.itemKey,d=C(e,["children","className","itemKey"]),u=p.useRef(i??Math.random().toString(36).slice(2,11)),n=p.useContext(je),o=n._activeItemKey,l=n.alwaysOpen,h=n.setActiveKey,m=p.useState(o===u.current),v=m[0],g=m[1];return p.useEffect(function(){!l&&v&&h(u.current)},[v]),p.useEffect(function(){g(o===u.current)},[o]),f.createElement("div",b({className:y("accordion-item",r)},d,{ref:s}),f.createElement(le.Provider,{value:{setVisible:g,visible:v}},t))});q.propTypes={children:c.node,className:c.string,itemKey:c.oneOfType([c.number,c.string])};q.displayName="CAccordionItem";function te(){return te=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},te.apply(this,arguments)}function Fe(e,s){return e.classList?!!s&&e.classList.contains(s):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+s+" ")!==-1}function Le(e,s){e.classList?e.classList.add(s):Fe(e,s)||(typeof e.className=="string"?e.className=e.className+" "+s:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+s))}function ge(e,s){return e.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Me(e,s){e.classList?e.classList.remove(s):typeof e.className=="string"?e.className=ge(e.className,s):e.setAttribute("class",ge(e.className&&e.className.baseVal||"",s))}var ze=function(s,t){return s&&t&&t.split(" ").forEach(function(r){return Le(s,r)})},ae=function(s,t){return s&&t&&t.split(" ").forEach(function(r){return Me(s,r)})},ne=function(e){Re(s,e);function s(){for(var r,i=arguments.length,d=new Array(i),u=0;u<i;u++)d[u]=arguments[u];return r=e.call.apply(e,[this].concat(d))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(n,o){var l=r.resolveArguments(n,o),h=l[0],m=l[1];r.removeClasses(h,"exit"),r.addClass(h,m?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(n,o)},r.onEntering=function(n,o){var l=r.resolveArguments(n,o),h=l[0],m=l[1],v=m?"appear":"enter";r.addClass(h,v,"active"),r.props.onEntering&&r.props.onEntering(n,o)},r.onEntered=function(n,o){var l=r.resolveArguments(n,o),h=l[0],m=l[1],v=m?"appear":"enter";r.removeClasses(h,v),r.addClass(h,v,"done"),r.props.onEntered&&r.props.onEntered(n,o)},r.onExit=function(n){var o=r.resolveArguments(n),l=o[0];r.removeClasses(l,"appear"),r.removeClasses(l,"enter"),r.addClass(l,"exit","base"),r.props.onExit&&r.props.onExit(n)},r.onExiting=function(n){var o=r.resolveArguments(n),l=o[0];r.addClass(l,"exit","active"),r.props.onExiting&&r.props.onExiting(n)},r.onExited=function(n){var o=r.resolveArguments(n),l=o[0];r.removeClasses(l,"exit"),r.addClass(l,"exit","done"),r.props.onExited&&r.props.onExited(n)},r.resolveArguments=function(n,o){return r.props.nodeRef?[r.props.nodeRef.current,n]:[n,o]},r.getClassNames=function(n){var o=r.props.classNames,l=typeof o=="string",h=l&&o?o+"-":"",m=l?""+h+n:o[n],v=l?m+"-active":o[n+"Active"],g=l?m+"-done":o[n+"Done"];return{baseClassName:m,activeClassName:v,doneClassName:g}},r}var t=s.prototype;return t.addClass=function(i,d,u){var n=this.getClassNames(d)[u+"ClassName"],o=this.getClassNames("enter"),l=o.doneClassName;d==="appear"&&u==="done"&&l&&(n+=" "+l),u==="active"&&i&&ke(i),n&&(this.appliedClasses[d][u]=n,ze(i,n))},t.removeClasses=function(i,d){var u=this.appliedClasses[d],n=u.base,o=u.active,l=u.done;this.appliedClasses[d]={},n&&ae(i,n),o&&ae(i,o),l&&ae(i,l)},t.render=function(){var i=this.props;i.classNames;var d=Ae(i,["classNames"]);return f.createElement(ye,te({},d,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s}(f.Component);ne.defaultProps={classNames:""};ne.propTypes={};var Ue=ne,oe=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=e.horizontal,d=e.onHide,u=e.onShow,n=e.visible,o=C(e,["children","className","horizontal","onHide","onShow","visible"]),l=p.useRef(null),h=Ne(s,l),m=p.useState(),v=m[0],g=m[1],E=p.useState(),N=E[0],R=E[1],Q=function(){if(u&&u(),i){l.current&&R(l.current.scrollWidth);return}l.current&&g(l.current.scrollHeight)},Y=function(){if(i){R(0);return}g(0)},_=function(){if(i){l.current&&R(l.current.scrollWidth);return}l.current&&g(l.current.scrollHeight)},ee=function(){if(d&&d(),i){R(0);return}g(0)},se=function(){if(i){R(0);return}g(0)};return f.createElement(Ue,{in:n,nodeRef:l,onEntering:Q,onEntered:Y,onExit:_,onExiting:ee,onExited:se,timeout:350},function(P){var K=v===0?null:{height:v},x=N===0?null:{width:N};return f.createElement("div",b({className:y(r,{"collapse-horizontal":i,collapsing:P==="entering"||P==="exiting","collapse show":P==="entered",collapse:P==="exited"}),style:b(b({},K),x)},o,{ref:h}),t)})});oe.propTypes={children:c.node,className:c.string,horizontal:c.bool,onHide:c.func,onShow:c.func,visible:c.bool};oe.displayName="CCollapse";var W=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=C(e,["children","className"]),d=p.useContext(le).visible;return f.createElement(oe,{className:"accordion-collapse",visible:d},f.createElement("div",b({className:y("accordion-body",r)},i,{ref:s}),t))});W.propTypes={children:c.node,className:c.string};W.displayName="CAccordionBody";var ce=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=C(e,["children","className"]),d=p.useContext(le),u=d.visible,n=d.setVisible;return f.createElement("button",b({type:"button",className:y("accordion-button",{collapsed:!u},r),"aria-expanded":!u,onClick:function(){return n(!u)}},i,{ref:s}),t)});ce.propTypes={children:c.node,className:c.string};ce.displayName="CAccordionButton";var G=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=C(e,["children","className"]);return f.createElement("div",b({className:y("accordion-header",r)},i,{ref:s}),f.createElement(ce,null,t))});G.propTypes={children:c.node,className:c.string};G.displayName="CAccordionHeader";var ie=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=C(e,["children","className"]);return f.createElement("div",b({className:y("btn-toolbar",r)},i,{ref:s}),t)});ie.propTypes={children:c.node,className:c.string};ie.displayName="CButtonToolbar";var de=p.forwardRef(function(e,s){var t,r=e.children,i=e.className,d=e.size,u=e.vertical,n=C(e,["children","className","size","vertical"]);return f.createElement("div",b({className:y(u?"btn-group-vertical":"btn-group",(t={},t["btn-group-".concat(d)]=d,t),i)},n,{ref:s}),r)});de.propTypes={children:c.node,className:c.string,size:c.oneOf(["sm","lg"]),vertical:c.bool};de.displayName="CButtonGroup";var H=p.forwardRef(function(e,s){var t,r=e.children,i=e.className,d=e.color,u=C(e,["children","className","color"]);return f.createElement("div",b({className:y("callout",(t={},t["callout-".concat(d)]=d,t),i)},u,{ref:s}),r)});H.propTypes={children:c.node,className:c.string,color:w};H.displayName="CCallout";var A=p.forwardRef(function(e,s){var t=e.children,r=e.as,i=r===void 0?"div":r,d=e.className,u=C(e,["children","as","className"]);return f.createElement(i,b({className:y("card-header",d)},u,{ref:s}),t)});A.propTypes={as:c.elementType,children:c.node,className:c.string};A.displayName="CCardHeader";var ue=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=e.closeButton,d=i===void 0?!0:i,u=C(e,["children","className","closeButton"]),n=p.useContext(Se).setVisible;return f.createElement("div",b({className:y("modal-header",r)},u,{ref:s}),t,d&&f.createElement(Pe,{onClick:function(){return n(!1)}}))});ue.propTypes={children:c.node,className:c.string,closeButton:c.bool};ue.displayName="CModalHeader";var pe=p.forwardRef(function(e,s){var t=e.children,r=e.as,i=r===void 0?"h5":r,d=e.className,u=C(e,["children","as","className"]);return f.createElement(i,b({className:y("modal-title",d)},u,{ref:s}),t)});pe.propTypes={as:c.elementType,children:c.node,className:c.string};pe.displayName="CModalTitle";var he=p.forwardRef(function(e,s){var t,r=e.children,i=e.as,d=i===void 0?"ul":i,u=e.className,n=e.layout,o=e.variant,l=C(e,["children","as","className","layout","variant"]);return f.createElement(d,b({className:y("nav",(t={},t["nav-".concat(n)]=n,t["nav-".concat(o)]=o,t),u),role:"navigation"},l,{ref:s}),r)});he.propTypes={as:c.elementType,children:c.node,className:c.string,layout:c.oneOf(["fill","justified"]),variant:c.oneOf(["pills","tabs","underline","underline-border"])};he.displayName="CNav";var $=p.forwardRef(function(e,s){var t,r=e.children,i=e.className,d=e.color,u=C(e,["children","className","color"]);return f.createElement("thead",b({className:y((t={},t["table-".concat(d)]=d,t),i)||void 0},u,{ref:s}),r)});$.propTypes={children:c.node,className:c.string,color:w};$.displayName="CTableHead";var k=p.forwardRef(function(e,s){var t,r=e.children,i=e.className,d=e.color,u=C(e,["children","className","color"]);return f.createElement("th",b({className:y((t={},t["table-".concat(d)]=d,t),i)||void 0},u,{ref:s}),r)});k.propTypes={children:c.node,className:c.string,color:w};k.displayName="CTableHeaderCell";var Z=p.forwardRef(function(e,s){var t,r=e.children,i=e.className,d=e.color,u=C(e,["children","className","color"]);return f.createElement("tbody",b({className:y((t={},t["table-".concat(d)]=d,t),i)||void 0},u,{ref:s}),r)});Z.propTypes={children:c.node,className:c.string,color:w};Z.displayName="CTableBody";var z=p.forwardRef(function(e,s){var t,r=e.children,i=e.active,d=e.align,u=e.className,n=e.color,o=C(e,["children","active","align","className","color"]),l=o.scope?"th":"td";return f.createElement(l,b({className:y((t={},t["align-".concat(d)]=d,t["table-active"]=i,t["table-".concat(n)]=n,t),u)||void 0},o,{ref:s}),r)});z.propTypes={active:c.bool,align:c.oneOf(["bottom","middle","top"]),children:c.node,className:c.string,color:w};z.displayName="CTableDataCell";var S=p.forwardRef(function(e,s){var t,r=e.children,i=e.active,d=e.align,u=e.className,n=e.color,o=C(e,["children","active","align","className","color"]);return f.createElement("tr",b({className:y((t={},t["align-".concat(d)]=d,t["table-active"]=i,t["table-".concat(n)]=n,t),u)||void 0},o,{ref:s}),r)});S.propTypes={active:c.bool,align:c.oneOf(["bottom","middle","top"]),children:c.node,className:c.string,color:w};S.displayName="CTableRow";var J=p.forwardRef(function(e,s){var t,r=e.children,i=e.className,d=e.color,u=C(e,["children","className","color"]);return f.createElement("tfoot",b({className:y((t={},t["table-".concat(d)]=d,t),i)||void 0},u,{ref:s}),r)});J.propTypes={children:c.node,className:c.string,color:w};J.displayName="CTableFoot";var fe=p.forwardRef(function(e,s){var t=e.children,r=C(e,["children"]);return f.createElement("caption",b({},r,{ref:s}),t)});fe.propTypes={children:c.node};fe.displayName="CTableCaption";var me=function(e){var s=e.children,t=e.responsive,r=C(e,["children","responsive"]);return t?f.createElement("div",b({className:typeof t=="boolean"?"table-responsive":"table-responsive-".concat(t)},r),s):f.createElement(f.Fragment,null,s)};me.propTypes={children:c.node,responsive:c.oneOfType([c.bool,c.oneOf(["sm","md","lg","xl","xxl"])])};me.displayName="CTableResponsiveWrapper";var xe=function(e){return e.replace(/[-_.]/g," ").replace(/ +/g," ").replace(/([a-z0-9])([A-Z])/g,"$1 $2").split(" ").map(function(s){return s.charAt(0).toUpperCase()+s.slice(1)}).join(" ")},qe=function(e){var s;return typeof e=="object"?(s=e.label)!==null&&s!==void 0?s:xe(e.key):xe(e)},We=function(e,s){return e?e.map(function(t){return typeof t=="object"?t.key:t}):s&&Ge(s)},Ge=function(e){return Object.keys(e[0]||{}).filter(function(s){return s.charAt(0)!=="_"})},X=p.forwardRef(function(e,s){var t,r=e.children,i=e.align,d=e.borderColor,u=e.bordered,n=e.borderless,o=e.caption,l=e.captionTop,h=e.className,m=e.color,v=e.columns,g=e.footer,E=e.hover,N=e.items,R=e.responsive,Q=e.small,Y=e.striped,_=e.stripedColumns,ee=e.tableFootProps,se=e.tableHeadProps,P=C(e,["children","align","borderColor","bordered","borderless","caption","captionTop","className","color","columns","footer","hover","items","responsive","small","striped","stripedColumns","tableFootProps","tableHeadProps"]),K=p.useMemo(function(){return We(v,N)},[v,N]);return f.createElement(me,{responsive:R},f.createElement("table",b({className:y("table",(t={},t["align-".concat(i)]=i,t["border-".concat(d)]=d,t["caption-top"]=l||o==="top",t["table-bordered"]=u,t["table-borderless"]=n,t["table-".concat(m)]=m,t["table-hover"]=E,t["table-sm"]=Q,t["table-striped"]=Y,t["table-striped-columns"]=_,t),h)},P,{ref:s}),(o&&o!=="top"||l)&&f.createElement(fe,null,o||l),v&&f.createElement($,b({},se),f.createElement(S,null,v.map(function(x,I){return f.createElement(k,b({},x._props&&b({},x._props),x._style&&{style:b({},x._style)},{key:I}),qe(x))}))),N&&f.createElement(Z,null,N.map(function(x,I){return f.createElement(S,b({},x._props&&b({},x._props),{key:I}),K&&K.map(function(V,Ee){return x[V]!==void 0?f.createElement(z,b({},x._cellProps&&b(b({},x._cellProps.all&&b({},x._cellProps.all)),x._cellProps[V]&&b({},x._cellProps[V])),{key:Ee}),x[V]):null}))})),r,g&&f.createElement(J,b({},ee),f.createElement(S,null,g.map(function(x,I){return f.createElement(z,b({},typeof x=="object"&&x._props&&b({},x._props),{key:I}),typeof x=="object"?x.label:x)})))))});X.propTypes={align:c.oneOf(["bottom","middle","top"]),borderColor:c.string,bordered:c.bool,borderless:c.bool,caption:c.oneOfType([c.string,c.oneOf(["top"])]),captionTop:c.string,children:c.node,className:c.string,color:w,columns:c.array,footer:c.array,hover:c.bool,items:c.array,responsive:c.oneOfType([c.bool,c.oneOf(["sm","md","lg","xl","xxl"])]),small:c.bool,striped:c.bool,stripedColumns:c.bool,tableFootProps:c.shape(b({},J.propTypes)),tableHeadProps:c.shape(b({},$.propTypes))};X.displayName="CTable";var be=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=C(e,["children","className"]);return f.createElement("div",b({className:y("tab-content",r)},i,{ref:s}),t)});be.propTypes={children:c.node,className:c.string};be.displayName="CTabContent";var D=p.forwardRef(function(e,s){var t=e.children,r=e.className,i=e.onHide,d=e.onShow,u=e.visible,n=C(e,["children","className","onHide","onShow","visible"]),o=p.useRef(),l=Ne(s,o);return f.createElement(ye,{in:u,nodeRef:o,onEnter:d,onExit:i,timeout:150},function(h){return f.createElement("div",b({className:y("tab-pane","fade",{active:u,show:h==="entered"},r)},n,{ref:l}),t)})});D.propTypes={children:c.node,className:c.string,onHide:c.func,onShow:c.func,visible:c.bool};D.displayName="CTabPane";var Ze=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M425.706,86.294A240,240,0,0,0,86.294,425.705,240,240,0,0,0,425.706,86.294ZM256,48A207.1,207.1,0,0,1,391.528,98.345L98.345,391.528A207.1,207.1,0,0,1,48,256C48,141.309,141.309,48,256,48Zm0,416a207.084,207.084,0,0,1-134.986-49.887l293.1-293.1A207.084,207.084,0,0,1,464,256C464,370.691,370.691,464,256,464Z' class='ci-primary'/>"];function Je(){const[e,s]=p.useState(!1);return p.useEffect(()=>{},[]),{visible:e}}const Xe=()=>{const[e,s]=p.useState(null),t="http://localhost:3000",r=async(u,n="GET",o=null,l={})=>{try{s(null);const h=`${t}/${u}`,m={method:n,headers:{"Content-Type":"application/json",...l.headers},...l};o&&(m.body=JSON.stringify(o));const v=await fetch(h,m);if(!v.ok)throw new Error("Failed to fetch data");return await v.json()}catch(h){return s(h.message),null}};return{getData:async u=>r(u),postData:async(u,n,o={})=>r(u,"POST",n,o),error:e}},ve=()=>{const[e,s]=p.useState(null),[t,r]=p.useState(!1),{getData:i}=Xe(),{getLoggedInUser:d}=Ce();p.useEffect(()=>{t||(async()=>{try{const o=d(),l=o&&o.siteid;if(console.log("userdata no useapidata:",o.siteid),!l){console.error("Erro: siteid do usuário não encontrado.");return}console.log("Buscando dados da API..."),console.log("siteid na useapidata:",l);const h=await i(`api/allservices?siteid=${l}`);if(h&&h[l]){console.log("Dados da API obtidos:",h[l]);const m=u(h[l]);s(m)}else console.error("Erro: dados de serviços não encontrados.");r(!0)}catch(o){console.error("Erro ao buscar os serviços:",o.message)}})()},[i,d,t]);const u=n=>{const o=[],l=[];return n.forEach(h=>{o.push(h["Total Requests"].period),Object.keys(h).forEach(m=>{if(m!=="Total Requests"){const v=h[m].total_requests,g=l.findIndex(E=>E.label===m);g===-1?l.push({label:m,data:[v]}):l[g].data.push(v)}})}),{labels:o,datasets:l}};return e},Qe=()=>{const e=ve(),[s,t]=p.useState([]);p.useEffect(()=>{e&&t(e.datasets.map(n=>n.label))},[e]);const r=p.useRef(null),i=p.useRef(null);p.useEffect(()=>{const n=r.current,o=e?e.labels:[];n&&(i.current?(i.current.data.labels=o,i.current.data.datasets.forEach((l,h)=>{l.data=e?e.datasets[h].data:[],l.hidden=!s.includes(l.label)}),i.current.update()):i.current=new B(n,{type:"line",data:{labels:o,datasets:e.datasets.map((l,h)=>({label:l.label,data:l.data,borderColor:re(h),pointBackgroundColor:re(h),backgroundColor:re(h),pointStyle:"rectRot",pointRadius:5,pointBorderColor:"rgb(0, 0, 0)",hidden:!s.includes(l.label)}))},options:{responsive:!0,plugins:{legend:{display:!0,labels:{usePointStyle:!0},onClick:(l,h)=>{const m=h.text;t(v=>v.includes(m)?v.filter(g=>g!==m):[...v,m])}},tooltip:{enabled:!0,mode:"index"}},scales:{x:{},y:{min:0,max:1e3}},elements:{line:{borderWidth:3,tension:.6}}}}))},[e,s]);const d=n=>{t(o=>o.includes(n)?o.filter(l=>l!==n):[...o,n])};if(!e)return null;const u=e.datasets.map((n,o)=>{const l={service:n.label};return e.labels.forEach((h,m)=>{l[`period_${m}`]=n.data[m]}),l});return a.jsx("div",{children:a.jsx("div",{children:a.jsxs(T,{color:"light",className:"mb-5 border-dark  border-top-5",children:[a.jsx(A,{as:"h2",className:"mb-3 border-light ",children:"Todos os Serviços"}),a.jsxs(H,{color:"secondary",children:[a.jsxs(T,{className:"mb-3 border-dark  ",children:[a.jsx(A,{as:"h3",className:"mb-3 border-light text-start",children:"Gráficos"}),a.jsx("canvas",{ref:r,height:"170px",width:"490px"})]}),a.jsxs(T,{className:"border-success  ",children:[a.jsx(A,{as:"h3",className:"mb-3 border-light text-start",children:"Tabela"}),a.jsxs(X,{hover:!0,responsive:"sm",children:[a.jsx($,{color:"primary",children:a.jsxs(S,{children:[a.jsx(k,{scope:"col",children:"Serviço"}),e.labels.map((n,o)=>a.jsx(k,{scope:"col",children:n},o))]})}),a.jsx(Z,{children:u.map((n,o)=>a.jsxs(S,{children:[a.jsx(k,{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`serviceCheckbox_${o}`,checked:s.includes(n.service),onChange:()=>d(n.service)}),a.jsx("label",{className:"form-check-label",htmlFor:`serviceCheckbox_${o}`,children:a.jsx("strong",{children:n.service})})]})}),Object.keys(n).filter(l=>l!=="service").map((l,h)=>a.jsx(k,{className:"text-normal",children:n[l]},h))]},o))})]})]})]})]})})})},re=e=>{const s=["#28a745","#3533CD","#FFDE59","#0097B2"];return s[e%s.length]},Ye="https://Douglas-Desenvolvimento.github.io/ICN-Portal/assets/trushscore_img-W90iijbR.jpg",_e="https://Douglas-Desenvolvimento.github.io/ICN-Portal/assets/Authentication-C9jyPVRM.jpg",es="https://Douglas-Desenvolvimento.github.io/ICN-Portal/assets/PreFill-DwhKb8WX.jpg",ss="https://Douglas-Desenvolvimento.github.io/ICN-Portal/assets/Verify-BP7jqMi1.jpg",as=({userrole:e})=>{const s=ve(),t=p.useRef(null),r=p.useRef(null),i=p.useRef(null),d=p.useRef(null),u=p.useRef(null),n=p.useRef(null),o=p.useRef(null),l=p.useRef(null);return p.useEffect(()=>{const h=t.current;h&&(u.current?(u.current.data.labels=s?s.labels:[],u.current.data.datasets[0].data=s?s.datasets[0].data:[],u.current.update()):u.current=new B(h,{type:"line",data:{labels:s?s.labels:[],datasets:[{label:"Total Requests",data:s?s.datasets[0].data:[],fill:!0,borderColor:"rgba(127,255,0, 0.5)",backgroundColor:"rgba(127,255,0, 0.5)",pointStyle:!0,tension:.6}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{x:{display:!1,grid:{display:!1},ticks:{display:!1}},y:{display:!1,grid:{display:!1},ticks:{display:!1}}}}}));const m=r.current;m&&(n.current?(n.current.data.labels=s?s.labels:[],n.current.data.datasets[0].data=s?s.datasets[3].data:[],n.current.update()):n.current=new B(m,{type:"line",data:{labels:s?s.labels:[],datasets:[{label:"Total Requests",data:s?s.datasets[3].data:[],fill:!0,borderColor:"rgba(176,224,230, 0.5)",backgroundColor:"rgba(176,224,230, 0.5)",pointStyle:!0,tension:.6}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{x:{display:!1,grid:{display:!1},ticks:{display:!1}},y:{display:!1,grid:{display:!1},ticks:{display:!1}}}}}));const v=i.current;v&&(o.current?(o.current.data.labels=s?s.labels:[],o.current.data.datasets[0].data=s?s.datasets[1].data:[],o.current.update()):o.current=new B(v,{type:"line",data:{labels:s?s.labels:[],datasets:[{label:"Total Requests",data:s?s.datasets[1].data:[],fill:!0,borderColor:"rgba(220,220,220, 0.5)",backgroundColor:"rgba(220,220,220, 0.5)",pointStyle:!0,tension:.6}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{x:{display:!1,grid:{display:!1},ticks:{display:!1}},y:{display:!1,grid:{display:!1},ticks:{display:!1}}}}}));const g=d.current;g&&(l.current?(l.current.data.labels=s?s.labels:[],l.current.data.datasets[0].data=s?s.datasets[2].data:[],l.current.update()):l.current=new B(g,{type:"line",data:{labels:s?s.labels:[],datasets:[{label:"Total Requests",data:s?s.datasets[2].data:[],fill:!0,borderColor:"rgba(220,220,220, 0.5)",backgroundColor:"rgba(220,220,220, 0.5)",pointStyle:!0,tension:.6}]},options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{x:{display:!1,grid:{display:!1},ticks:{display:!1}},y:{display:!1,grid:{display:!1},ticks:{display:!1}}}}}))},[s]),console.log("chartData puro:",s,"peiodos:",s?s.labels[0]:[],"Valor unico:",s?s.datasets[3].data[0]:[]),a.jsx("div",{children:a.jsx("div",{children:a.jsx(H,{color:"secondary",children:a.jsxs(O,{xs:{cols:2,gutter:2},md:{cols:2},children:[e.includes("superAdm")||e.includes("admin")||e.includes("analyst")?a.jsx(j,{xs:!0,children:a.jsxs(T,{color:"info",textColor:"white",className:"border-top- border-top-5",style:{backgroundImage:`url(${_e})`,backgroundSize:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center bottom 21%",width:"100%",height:"auto"},children:[a.jsx(F,{children:a.jsxs(O,{children:[a.jsx(j,{children:a.jsxs("h4",{className:"text-start",children:[" ",s?s.datasets[3].label:[]]})}),a.jsx(j,{children:a.jsxs("h3",{className:"text-end",children:[s?s.datasets[3].data[0]:[]," ",a.jsxs("span",{className:"fs-5 fw-normal",children:["( ",s?s.labels[0]:[],")"]})]})})]})}),a.jsx("canvas",{ref:r,style:{position:"relative",width:"576px",height:"70px",bottom:"-1"}})]})}):null,e.includes("superAdm")||e.includes("admin")||e.includes("analyst")?a.jsx(j,{xs:!0,children:a.jsxs(T,{color:"info",textColor:"white",className:"border-top-success border-top-5",style:{backgroundImage:`url(${Ye})`,backgroundSize:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center bottom 20%",width:"100%",height:"auto"},children:[a.jsx(F,{children:a.jsxs(O,{children:[a.jsx(j,{children:a.jsxs("h4",{className:"text-start",children:[" ",s?s.datasets[0].label:[]]})}),a.jsx(j,{children:a.jsxs("h3",{className:"text-end",children:[s?s.datasets[0].data[0]:[]," ",a.jsxs("span",{className:"fs-5 fw-normal",children:["( ",s?s.labels[0]:[],")"]})]})})]})}),a.jsx("canvas",{ref:t,style:{position:"relative",width:"576px",height:"70px",bottom:"-1"}})]})}):null,e.includes("superAdm")||e.includes("admin")||e.includes("analyst")?a.jsx(j,{xs:!0,children:a.jsxs(T,{color:"info",textColor:"white",className:"border-top- border-top-5",style:{backgroundImage:`url(${es})`,backgroundSize:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center bottom 15%",width:"100%",height:"auto"},children:[a.jsx(F,{children:a.jsxs(O,{children:[a.jsx(j,{children:a.jsxs("h4",{className:"text-start",children:[" ",s?s.datasets[1].label:[]]})}),a.jsx(j,{children:a.jsxs("h3",{className:"text-end",children:[s?s.datasets[1].data[0]:[]," ",a.jsxs("span",{className:"fs-5 fw-normal",children:["( ",s?s.labels[0]:[],")"]})]})})]})}),a.jsx("canvas",{ref:i,style:{position:"relative",width:"576px",height:"70px",bottom:"-1"}})]})}):null,e.includes("superAdm")||e.includes("admin")?a.jsx(j,{xs:!0,children:a.jsxs(T,{color:"info",textColor:"white",className:"border-top- border-top-5",style:{backgroundImage:`url(${ss})`,backgroundSize:"100%",backgroundRepeat:"no-repeat",backgroundPosition:"center bottom 10%",width:"100%",height:"auto"},children:[a.jsx(F,{children:a.jsxs(O,{children:[a.jsx(j,{children:a.jsxs("h4",{className:"text-start",children:[" ",s?s.datasets[2].label:[]]})}),a.jsx(j,{children:a.jsxs("h3",{className:"text-end",children:[s?s.datasets[2].data[0]:[]," ",a.jsxs("span",{className:"fs-5 fw-normal",children:["( ",s?s.labels[0]:[],")"]})]})})]})}),a.jsx("canvas",{ref:d,style:{position:"relative",width:"576px",height:"70px",bottom:"-1"}})]})}):null]})})})})},rs=()=>{const e=ve(),[s,t]=p.useState([]),r=o=>{s.includes(o)?t(s.filter(l=>l!==o)):t([...s,o])};if(!e)return a.jsx("div",{children:"Loading..."});const i=[{key:"id",label:"ID",_props:{scope:"col"}},{key:"telefone",_props:{scope:"col"}},{key:"date_time",label:"Data da transação",_props:{scope:"col"}},{key:"status",label:"Status da Transação",_props:{scope:"col"}}],d=["success","primary","warning","info"],u=e.datasets.map((o,l)=>a.jsx(De,{button:{color:d[l],variant:"outline"},id:`btncheck${l+1}`,autoComplete:"off",label:o.label,onChange:()=>r(l),checked:s.includes(l)},l)),n=s.flatMap(o=>e.datasets[o].data.map((l,h)=>({id:l.reqid,telefone:l.phone,date_time:l.date_time,status:l.status,_cellProps:{id:{scope:"row"}}})));return a.jsx("div",{children:a.jsx(U,{alwaysOpen:!0,activeItemKey:2,children:a.jsxs(q,{itemKey:1,children:[a.jsx(G,{children:"Detelhamento do das transações"}),a.jsxs(W,{children:[a.jsx(ie,{className:"mb-3",role:"group","aria-label":"Toolbar with button groups",children:a.jsx(de,{role:"group","aria-label":"Basic checkbox toggle button group",children:u})}),a.jsxs(T,{color:"light",className:"mb-5 border-secondary  border-top-5",children:[a.jsx(A,{as:"h2",className:"mb-3 border-light ",children:"Detelhamento dos Serviços"}),a.jsx(H,{color:"secondary",children:a.jsxs(T,{className:"border-success  ",children:[a.jsx(A,{as:"h3",className:"mb-3 border-light text-start",children:"Tabela"}),a.jsx(X,{small:!0,striped:!0,hover:!0,bordered:!0,captionTop:s.map(o=>e.datasets[o].label).join(", "),columns:i,items:n,tableHeadProps:{color:"secondary"}})]})})]})]})]})})})},ts=({orgservices:e,userrole:s,formattedPhoneNumber:t})=>a.jsx("div",{children:e.includes("AU_Portal")&&a.jsx(U,{alwaysOpen:!0,activeItemKey:1,children:a.jsxs(q,{itemKey:1,children:[a.jsx(G,{children:"AUDIT"}),a.jsxs(W,{children:[s.includes("superAdm")||s.includes("admin")||s.includes("analyst")?a.jsx(as,{userrole:s}):null,a.jsx(Qe,{}),a.jsx(rs,{}),a.jsx(Ie,{formattedPhoneNumber:t})]})]})})}),ls=()=>a.jsx("div",{children:a.jsx("span",{children:"Consteúdo da página AdmUser em construção..."})}),ns=()=>a.jsx("div",{children:a.jsx("span",{children:"Consteúdo da página Voice em construção..."})}),is=()=>{const{visible:e}=Je(),{getLoggedInUser:s,logout:t}=Ce(),[r,i]=p.useState(null),[d,u]=p.useState([]),[n,o]=p.useState(1),[l,h]=p.useState(""),m=Te();p.useEffect(()=>{(async()=>{try{const N=await s();r||(i(N),N&&(u(N.services),h(N.role)))}catch(N){console.error("Erro ao buscar os serviços:",N.message)}})()},[s,r]);const v=()=>{t(),m("/")};if(!r)return null;const g=E=>{o(E)};return console.log("orgservices:",d),console.log("activeKey:",n),console.log("userrole:",l),a.jsx(a.Fragment,{children:a.jsxs("div",{children:[a.jsx(Oe,{}),e&&a.jsxs(Be,{backdrop:"static",visible:e,onClose:()=>setVisible(!1),"aria-labelledby":"StaticBackdropExampleLabel",className:"d-flex justify-content-center",children:[a.jsx(ue,{className:"d-flex justify-content-center",children:a.jsx(pe,{className:"d-flex justify-content-center",id:"StaticBackdropExampleLabel",children:"Sessão Expirada, efetue um novo login"})}),a.jsx(He,{className:"d-flex justify-content-center align-items-center",children:a.jsx($e,{color:"black",icon:Ze,width:84,height:84})}),a.jsx(Ke,{className:"d-flex justify-content-center",children:a.jsx(we,{onClick:v,color:"primary",children:"Login"})})]}),a.jsx("br",{}),a.jsxs(he,{variant:"tabs",role:"tablist",children:[d.includes("AU_Portal")&&a.jsx(L,{children:a.jsx(M,{href:"#!",active:n===1,onClick:()=>o(1),children:"AUDIT"})}),d.includes("TS_Portal")&&a.jsx(L,{children:a.jsx(M,{href:"#!",active:n===2,onClick:()=>g(2),children:"PROVE"})}),d.includes("VC_Portal")&&a.jsx(L,{children:a.jsx(M,{href:"#!",active:n===3,onClick:()=>g(3),children:"VOICE"})}),l.includes("admin")||l.includes("superAdm")&&a.jsx(L,{children:a.jsx(M,{href:"#!",active:n===4,onClick:()=>g(4),children:"ADMIN"})})]}),a.jsxs(be,{children:[a.jsxs(D,{role:"tabpanel","aria-labelledby":"AUDIT",visible:n===1,children:[a.jsx(ts,{orgservices:d,userrole:l}),console.log("AuditPage renderizado")]}),a.jsx(D,{role:"tabpanel","aria-labelledby":"PROVE",visible:n===2,children:a.jsx(Ve,{orgservices:d,userrole:l})}),a.jsx(D,{role:"tabpanel","aria-labelledby":"VOICE",visible:n===3,children:a.jsx(ns,{orgservices:d,userrole:l})}),a.jsx(D,{role:"tabpanel","aria-labelledby":"ADMIN",visible:n===4,children:a.jsx(ls,{orgservices:d,userrole:l})})]})]})})};export{is as H};
